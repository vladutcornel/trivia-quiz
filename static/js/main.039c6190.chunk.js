(this["webpackJsonptrivia-quiz"]=this["webpackJsonptrivia-quiz"]||[]).push([[1],{103:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(16),s=n.n(c),u=n(44),i=(n(81),n(33)),o=n(4),f=n(107),d=n(106),l=n(69),p=n(68),b=n.n(p),j=n(3),O=a.a.lazy((function(){return n.e(6).then(n.bind(null,125))})),h=a.a.lazy((function(){return Promise.all([n.e(0),n.e(4),n.e(7)]).then(n.bind(null,131))})),v=a.a.lazy((function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,133))})),y=a.a.lazy((function(){return n.e(5).then(n.bind(null,132))}));var x=function(){var e=Object(j.jsx)("div",{children:"Loading..."});return Object(j.jsx)(i.a,{children:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(f.a,{className:"justify-content-between",children:Object(j.jsxs)(d.a,{children:[Object(j.jsx)(i.b,{to:"/",className:"navbar-brand",children:"Cornel's Trivia"}),Object(j.jsxs)(i.b,{to:"/settings",className:"nav-link",children:[Object(j.jsx)(b.a,{path:l.a,size:1}),Object(j.jsx)("span",{className:"sr-only",children:"Settings"})]})]})}),Object(j.jsxs)(o.c,{children:[Object(j.jsx)(o.a,{path:"/q/:question",render:function(){return Object(j.jsx)(r.Suspense,{fallback:e,children:Object(j.jsx)(h,{})})}}),Object(j.jsx)(o.a,{path:"/settings",render:function(){return Object(j.jsx)(r.Suspense,{fallback:e,children:Object(j.jsx)(v,{})})}}),Object(j.jsx)(o.a,{path:"/leaderboard",render:function(){return Object(j.jsx)(r.Suspense,{fallback:e,children:Object(j.jsx)(y,{})})}}),Object(j.jsx)(o.a,{path:"/",render:function(){return Object(j.jsx)(r.Suspense,{fallback:e,children:Object(j.jsx)(O,{})})}})]})]})})},m=n(18),w=n(70),g=n(5),k=n(22);function q(e,t){return Object(g.a)(Object(g.a)({},e),t)}var A=n(26),E=Object.freeze({questions:[],expire:Date.now()});var I=n(66),_=n(32);var N=n(36),S=Object.freeze({top:[],latest:{}});var L=Object(m.c)({questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=t.payload,a=void 0===r?{}:r;switch(n){case A.b:return q(e,{expire:a.expire,questions:Object(k.a)(a.questions)});case A.a:return q(e,{questions:[]});case A.c:return q(e,{questions:e.questions.map((function(e){return e.id===a.question.id?Object(g.a)({},a.question):Object(g.a)({},e)}))})}return e},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_.a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=t.payload,a=void 0===r?{}:r;switch(n){case I.a:return q(e,Object(g.a)({},a))}return e},leaderboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=t.payload,a=void 0===r?{}:r;switch(n){case N.b:return q(e,{top:Object(k.a)(a.top)});case N.a:return q(e,{latest:Object(g.a)({},a.latest)})}return e}}),T=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.d,D=Object(m.e)(L,T(Object(m.a)(w.a)));s.a.render(Object(j.jsx)(u.a,{store:D,children:Object(j.jsx)(x,{})}),document.getElementById("root"))},14:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(29),a=n(30),c=function(){function e(t){Object(r.a)(this,e),this.prefix=t}return Object(a.a)(e,[{key:"key",value:function(e){return"".concat(this.prefix,":").concat(e)}},{key:"getItem",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=JSON.parse(localStorage.getItem(this.key(e))))&&void 0!==t?t:n}},{key:"setItem",value:function(e,t){localStorage.setItem(this.key(e),JSON.stringify(t))}}]),e}()},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return p}));var r=n(7),a=n.n(r),c=n(13),s=n(5),u=n(29),i=n(30),o=n(71),f=n.n(o),d=Object.freeze({ANY:"any",EASY:"easy",MEDIUM:"medium",HARD:"hard"}),l=Object.freeze({ANY:"any",MULTIPLE:"multiple",BOOLEAN:"boolean"}),p=function(){function e(t){Object(u.a)(this,e),this.options=Object(s.a)(Object(s.a)({},{difficulty:d.ANY,type:l.ANY}),t),this.axios=f.a.create({baseURL:"https://opentdb.com/"})}return Object(i.a)(e,[{key:"load",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,r,c,u=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:10,(n=Object(s.a)(Object(s.a)({},this.options),{},{amount:t})).difficulty===d.ANY&&(n.difficulty=""),n.type===l.ANY&&(n.type=""),e.next=6,this.axios.get("api.php",{params:n});case 6:if(r=e.sent,0===(c=r.data).response_code){e.next=10;break}throw new Error("Failed to load questions");case 10:return e.abrupt("return",c.results);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setDifficulty",value:function(e){this.options.difficulty=e}},{key:"setType",value:function(e){this.options.type=e}}]),e}()},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(14),a=n(32),c=new r.a("settings");function s(){return c.getItem("settings",a.a)}},26:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return O})),n.d(t,"a",(function(){return h})),n.d(t,"f",(function(){return y})),n.d(t,"e",(function(){return x})),n.d(t,"g",(function(){return m})),n.d(t,"d",(function(){return w}));var r=n(5),a=n(7),c=n.n(a),s=n(13),u=n(21),i=n(31),o=Object(i.a)("questions",{questions:["++id","type","difficulty","question"].join(",")}),f=n(25),d=n(45),l=n(22);function p(e){for(var t=Object(l.a)(e),n=[];t.length>0;){var r=Math.floor(Math.random()*t.length)-1,a=t.splice(r,1),c=Object(d.a)(a,1)[0];n.push(c)}return n}var b=n(14),j="LOAD_QUESTIONS",O="REPLACE_QUESTION",h="DELETE_QUESTIONS_FROM_MEMORY",v=new b.a("questions"),y=function(){return function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.a)(),e.next=3,o.questions.limit(n.amount).toArray();case 3:r=e.sent,t({type:j,payload:{questions:r,expire:v.getItem("expire")}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(){return function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.a)(),a=new u.c(Object(r.a)(Object(r.a)({},n),{},{encode:"url3986"})),e.next=4,a.load(n.amount);case 4:return(s=e.sent.map((function(e){var t,n=(t=e.type===u.b.BOOLEAN?["True","False"]:p(e.incorrect_answers.concat([e.correct_answer]))).findIndex((function(t){return t===e.correct_answer}));return{id:e.id,question:decodeURIComponent(e.question),answers:t.map((function(e){return decodeURIComponent(e)})),correctAnswer:n,isLast:!1,userAnswer:-1,difficulty:e.difficulty,type:e.type,originalCorrectAnswer:e.correct_answer}})))[s.length-1].isLast=!0,e.next=8,o.questions.clear();case 8:return e.next=10,o.questions.bulkPut(s);case 10:return v.setItem("expire",Date.now()+9e5),e.next=13,y(n)(t);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(e){var t=e.question,n=e.answerIndex;return function(){var e=Object(s.a)(c.a.mark((function e(r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.questions.get(t.id);case 2:if((a=e.sent).userAnswer!==n){e.next=5;break}return e.abrupt("return");case 5:return a.userAnswer=n,e.next=8,o.questions.put(a);case 8:r({type:O,payload:{question:a}});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(){return{type:h}}},31:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(72),a=n(14);function c(e,t){var n=new r.a(e),c=new a.a("db:".concat(e)),s=c.getItem("schema",{}),u=c.getItem("version",0),i=!1;return Object.keys(t).forEach((function(e){s[e]&&t[e]===s[e]||(i=!0)})),i&&(u+=1,c.setItem("version",u),c.setItem("schema",t)),n.version(u).stores(t),n}},32:function(e,t,n){"use strict";var r=n(21);t.a=Object.freeze({amount:10,difficulty:r.a.ANY,type:r.b.ANY})},36:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return j}));var r=n(7),a=n.n(r),c=n(13),s=n(31),u=Object(s.a)("leaderboard",{leaderboard:["++id","answersCorrect","answersTotal","percentage","difficulty","type","name"].join(",")}),i=n(25),o=n(14),f="LOAD_LEADERBOARD",d="LOAD_LATEST_PLAY",l=new o.a("leaderboard"),p=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.leaderboard.get(l.getItem("latest_id"));case 3:n=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n={id:0,name:""};case 9:t({type:d,payload:{latest:n}});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},b=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.leaderboard.orderBy("percentage").reverse().toArray();case 2:n=e.sent,t({type:f,payload:{top:n}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=function(e){var t=e.name,n=e.answersCorrect;return function(){var e=Object(c.a)(a.a.mark((function e(r){var c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(i.a)(),e.next=3,u.leaderboard.add({name:t,answersCorrect:n,answersTotal:c.amount,percentage:100*n/c.amount,difficulty:c.difficulty,type:c.type});case 3:return s=e.sent,l.setItem("latest_id",s),e.abrupt("return",b()(r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},66:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return i}));var r=n(5),a=n(14),c="SAVE_SETTINGS",s=new a.a("settings"),u=function(){return{type:c,payload:Object(r.a)({},s.getItem("settings",{}))}},i=function(e){return s.setItem("settings",e),{type:c,payload:e}}},81:function(e,t,n){}},[[103,2,3]]]);
//# sourceMappingURL=main.039c6190.chunk.js.map